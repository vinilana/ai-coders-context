export type Locale = 'en' | 'pt-BR';

export const SUPPORTED_LOCALES: Locale[] = ['en', 'pt-BR'];
export const DEFAULT_LOCALE: Locale = 'en';

const englishMessages = {
  'cli.name': 'AI Coders Context by aicoders.academy',
  'cli.tagline': 'Scaffold documentation and agent playbooks with or without LLM assistance',
  'cli.description': 'Scaffold documentation and agent playbooks for your repository',
  'global.options.lang': 'Language for CLI output (en or pt-BR)',
  'ui.version': 'Version {version}',
  'ui.projectConfiguration.title': 'Project Configuration',
  'ui.projectConfiguration.repository': 'Repository',
  'ui.projectConfiguration.output': 'Output',
  'ui.projectConfiguration.mode': 'Mode',
  'ui.progress.starting': 'Starting...',
  'ui.analysis.complete.title': 'Analysis Complete',
  'ui.analysis.files': 'Files',
  'ui.analysis.directories': 'Directories',
  'ui.analysis.totalSize': 'Total Size',
  'ui.fileTypeDistribution.title': 'File Type Distribution',
  'ui.generationSummary.title': 'Scaffold Complete',
  'ui.generationSummary.documentation': 'Documentation',
  'ui.generationSummary.agents': 'Agents',
  'ui.generationSummary.timeElapsed': 'Time',
  'ui.generationSummary.nextStep': 'Next step: customize the generated templates to match your project.',
  'ui.error.title': 'Error',
  'info.prompt.title': 'System Prompt',
  'info.prompt.usingCustom': 'Using prompt from {path}.',
  'info.prompt.usingPackage': 'Using packaged prompt at {path}.',
  'info.prompt.usingBundled': 'Using built-in prompt bundled with ai-context.',
  'info.update.available.title': 'Update available',
  'info.update.available.detail': 'A newer version {latest} is available (current {current}). Update with {command}.',
  'commands.init.description': 'Generate docs and agent scaffolding for a repository',
  'commands.init.arguments.repoPath': 'Path to the repository to analyze',
  'commands.init.arguments.type': 'Scaffold type: "docs", "agents", or "both" (default)',
  'commands.init.options.output': 'Output directory for generated assets',
  'commands.init.options.exclude': 'Glob patterns to exclude from analysis',
  'commands.init.options.include': 'Glob patterns to include during analysis',
  'commands.init.options.verbose': 'Enable verbose logging',
  'commands.init.options.noSemantic': 'Disable semantic code analysis (enabled by default)',
  'commands.fill.description': 'Use an LLM to fill generated docs and agent playbooks with the latest repo context',
  'commands.fill.arguments.repoPath': 'Path to the repository root used to build context',
  'commands.fill.options.output': 'Scaffold directory containing docs/ and agents/',
  'commands.fill.options.apiKey': 'API key for the LLM provider',
  'commands.fill.options.model': 'LLM model to use',
  'commands.fill.options.provider': 'LLM provider (openrouter, openai, anthropic, google)',
  'commands.fill.options.baseUrl': 'Custom base URL for provider APIs',
  'commands.fill.options.prompt': 'Path to an instruction prompt',
  'commands.fill.options.limit': 'Maximum number of files to process',
  'commands.fill.options.exclude': 'Glob patterns to exclude from repository analysis',
  'commands.fill.options.include': 'Glob patterns to include during analysis',
  'commands.fill.options.verbose': 'Enable verbose logging',
  'commands.fill.options.noSemantic': 'Disable semantic context mode and use tool-based exploration instead',
  'commands.fill.options.languages': 'Programming languages to analyze (e.g., typescript,python)',
  'commands.fill.options.useLsp': 'Enable LSP for deeper semantic analysis (type info, references)',
  'prompts.fill.semantic': 'Use semantic context mode? (faster, fewer tokens - recommended)',
  'prompts.fill.languages': 'Select programming languages for analysis',
  'prompts.fill.useLsp': 'Use LSP for deeper type analysis? (slower but more accurate)',
  'commands.plan.description': 'Create a development plan that links documentation and agent playbooks',
  'commands.plan.arguments.planName': 'Name of the plan (used to create the file slug)',
  'commands.plan.options.output': 'Scaffold directory containing docs/ and agents/',
  'commands.plan.options.title': 'Custom title for the plan document',
  'commands.plan.options.summary': 'Seed summary for the plan header',
  'commands.plan.options.force': 'Overwrite the plan if it already exists (scaffold mode)',
  'commands.plan.options.fill': 'Use an LLM to fill or update the plan instead of scaffolding',
  'commands.plan.options.repo': 'Repository root to summarize for additional context',
  'commands.plan.options.apiKey': 'API key for the LLM provider',
  'commands.plan.options.model': 'LLM model to use',
  'commands.plan.options.provider': 'LLM provider (openrouter, openai, anthropic, google)',
  'commands.plan.options.baseUrl': 'Custom base URL for provider APIs',
  'commands.plan.options.prompt': 'Path to a plan update instruction prompt',
  'commands.plan.options.dryRun': 'Preview updates without writing files',
  'commands.plan.options.include': 'Glob patterns to include during repository analysis',
  'commands.plan.options.exclude': 'Glob patterns to exclude from repository analysis',
  'commands.plan.options.verbose': 'Enable verbose logging',
  'commands.plan.options.noSemantic': 'Disable semantic code analysis (enabled by default)',
  'commands.plan.options.noLsp': 'Disable LSP semantic analysis (enabled by default for plans)',
  'errors.init.scaffoldFailed': 'Failed to scaffold repository assets',
  'errors.fill.failed': 'Failed to fill documentation with LLM assistance',
  'errors.plan.creationFailed': 'Failed to create plan template',
  'errors.init.invalidType': 'Invalid scaffold type "{value}". Expected one of: {allowed}',
  'errors.common.repoMissing': 'Repository path does not exist: {path}',
  'warnings.scaffold.noneSelected': 'No documentation or agent playbooks selected. Nothing to scaffold.',
  'steps.init.analyze': 'Analyzing repository structure',
  'steps.init.docs': 'Scaffolding documentation',
  'steps.init.agents': 'Scaffolding agent playbooks',
  'spinner.repo.scanning': 'Scanning repository...',
  'spinner.repo.scanComplete': 'Found {fileCount} files across {directoryCount} directories',
  'spinner.docs.creating': 'Creating docs directory and templates...',
  'spinner.docs.creatingWithSemantic': 'Analyzing codebase and creating docs templates...',
  'spinner.docs.created': 'Documentation scaffold created ({count} files)',
  'spinner.agents.creating': 'Creating agent directory and templates...',
  'spinner.agents.creatingWithSemantic': 'Analyzing codebase and creating agent playbooks...',
  'spinner.agents.created': 'Agent scaffold created ({count} files)',
  'spinner.plan.creating': 'Creating plan template...',
  'spinner.plan.created': 'Plan template created',
  'spinner.plan.creationFailed': 'Failed to create plan template',
  'success.scaffold.ready': 'Scaffold ready in {path}',
  'success.plan.createdAt': 'Plan created at {path}',
  'errors.fill.missingDocsScaffold': 'Documentation scaffold not found. Run `ai-context init` first.',
  'errors.fill.missingAgentsScaffold': 'Agent scaffold not found. Run `ai-context init` first.',
  'errors.fill.missingScaffold': 'No scaffold found. Run `ai-context init` first to create docs and/or agents.',
  'steps.fill.analyze': 'Analyzing repository structure',
  'warnings.fill.noTargets': 'No Markdown files found in .context/docs or .context/agents. Run "ai-context init" before filling.',
  'steps.fill.processFiles': 'Updating {count} files with {model}',
  'spinner.fill.processing': 'Processing {path}...',
  'spinner.fill.noContent': 'No content received for {path}',
  'messages.fill.emptyResponse': 'Empty response from LLM',
  'messages.fill.previewStart': '--- Preview Start ---',
  'messages.fill.previewEnd': '--- Preview End ---',
  'spinner.fill.updated': 'Updated {path}',
  'spinner.fill.failed': 'Failed {path}',
  'steps.fill.summary': 'Summarizing LLM usage',
  'success.fill.completed': 'LLM-assisted update complete. Review the changes and commit when ready.',
  'errors.plan.invalidName': 'Plan name must contain at least one alphanumeric character.',
  'messages.plan.regenerated': 'Regenerated {path} before LLM fill.',
  'messages.plan.created': 'Created {path} before LLM fill.',
  'info.plan.scaffolded.title': 'Plan scaffolded',
  'errors.plan.missingPlansDir': 'Plans directory not found. Run `ai-context plan <name>` to create one.',
  'errors.plan.notFound': 'Plan not found. Expected {expected}.',
  'steps.plan.summary': 'Summarizing repository state',
  'spinner.planFill.analyzingRepo': 'Analyzing repository...',
  'spinner.planFill.summaryReady': 'Repository summary ready',
  'steps.plan.update': 'Updating {path} with {model}',
  'spinner.planFill.updating': 'Filling {path}...',
  'spinner.planFill.noContent': 'No content received from LLM',
  'spinner.planFill.dryRun': 'Dry run - preview follows',
  'spinner.planFill.updated': 'Updated {path}',
  'spinner.planFill.failed': 'Failed to fill plan',
  'steps.plan.summaryResults': 'Summarizing LLM usage',
  'success.plan.filled': 'Plan fill complete. Review the updates and commit when ready.',
  'errors.commands.analyzeRemoved': 'The analyze command has been removed in the scaffolding-only version of ai-context.',
  'errors.commands.updateRemoved': 'The update command is no longer supported. Re-run `ai-context init` to refresh scaffolds.',
  'errors.commands.previewRemoved': 'Preview mode has been retired. Use the generated docs and agent templates directly.',
  'errors.commands.guidelinesRemoved': 'Guidelines generation relied on LLMs and is no longer available.',
  'errors.cli.executionFailed': 'CLI execution failed',
  'errors.init.overwriteDeclined': 'Scaffold aborted to avoid overwriting existing content.',
  'prompts.main.action': 'What would you like to do?',
  'prompts.main.choice.scaffold': 'Generate documentation/agent scaffolding',
  'prompts.main.choice.fill': 'Fill docs and agents with an LLM',
  'prompts.main.choice.plan': 'Create a development plan',
  'prompts.main.choice.changeLanguage': 'Change language',
  'prompts.main.choice.exit': 'Exit interactive mode',
  'prompts.scaffold.repoPath': 'Repository path to analyze',
  'prompts.scaffold.type': 'What should we scaffold?',
  'prompts.scaffold.typeBoth': 'Docs and agents',
  'prompts.scaffold.typeDocs': 'Docs only',
  'prompts.scaffold.typeAgents': 'Agents only',
  'prompts.init.confirmOverwriteDocs': 'Documentation already exists at {path}. Overwrite existing files?',
  'prompts.init.confirmOverwriteAgents': 'Agent playbooks already exist at {path}. Overwrite existing files?',
  'prompts.common.verbose': 'Enable verbose logging?',
  'prompts.fill.repoPath': 'Repository path containing the scaffold',
  'prompts.fill.promptPath': 'Custom prompt path (leave blank to use the bundled default)',
  'prompts.fill.limit': 'Maximum number of files to update (leave blank for all)',
  'prompts.fill.overrideModel': 'Override provider/model configuration?',
  'prompts.fill.provider': 'Select LLM provider',
  'prompts.fill.provider.openrouter': 'OpenRouter (access to multiple models)',
  'prompts.fill.provider.openai': 'OpenAI (GPT-4, etc.)',
  'prompts.fill.provider.anthropic': 'Anthropic (Claude)',
  'prompts.fill.provider.google': 'Google (Gemini)',
  'prompts.fill.model': 'Model identifier',
  'prompts.fill.provideApiKey': 'Provide an API key for this run?',
  'prompts.fill.apiKey': 'API key',
  'prompts.plan.name': 'Plan name (used for the file slug)',
  'prompts.plan.goal': 'What should be planned?',
  'prompts.plan.mode': 'How would you like to work with this plan?',
  'prompts.plan.modeScaffold': 'Scaffold a plan template',
  'prompts.plan.modeFill': 'Create a plan with AI (outline or AI-filled)',
  'prompts.plan.summary': 'Optional summary to seed the plan (leave blank to add later)',
  'prompts.plan.repoPath': 'Repository root for context',
  'prompts.plan.dryRun': 'Preview updates without writing files?',
  'prompts.plan.useLsp': 'Use LSP for deeper type analysis? (recommended for plans)',
  'prompts.language.select': 'Choose the CLI language / Escolha o idioma do CLI',
  'prompts.language.option.en': 'English / Ingl√™s',
  'prompts.language.option.pt-BR': 'Portuguese (Brazil) / Portugu√™s (Brasil)',
  'errors.plan.fillFailed': 'Failed to fill plan with LLM assistance',
  'errors.fill.promptMissing': 'Prompt file not found at {path}.',
  'errors.fill.apiKeyMissing': '{provider} API key is required. Set one of {envVars} or use --api-key.',
  'info.interactive.returning.title': 'Main menu',
  'info.interactive.returning.detail': 'Returning to the interactive menu. Pick another action or choose Exit.',
  'success.interactive.goodbye': 'Goodbye! Thanks for using ai-context.',
  'agent.starting': 'Starting',
  'agent.complete': 'Complete',
  'agent.steps': 'steps',
  'agent.type.documentation': 'Documentation Agent',
  'agent.type.playbook': 'Playbook Agent',
  'agent.type.plan': 'Plan Agent',
  'agent.type.fill': 'Fill Agent',
  'commands.sync.description': 'Sync agent playbooks to AI tool directories (.claude, .github, etc.)',
  'commands.sync.options.source': 'Source agents directory',
  'commands.sync.options.target': 'Target directories to sync to',
  'commands.sync.options.mode': 'Reference type: symlink or markdown',
  'commands.sync.options.preset': 'Built-in preset: claude, github, cursor, or all',
  'commands.sync.options.force': 'Overwrite existing files/symlinks',
  'commands.sync.options.dryRun': 'Preview changes without writing',
  'commands.sync.options.verbose': 'Enable verbose logging',
  'prompts.main.choice.syncAgents': 'Sync agents to AI tools',
  'prompts.main.choice.create': 'Create documentation for this project',
  'prompts.main.choice.moreOptions': 'More options...',
  'prompts.main.choice.updateDocs': 'Update documentation',
  'prompts.main.choice.updateDocsBehind': 'Update documentation ({daysBehind} days behind)',
  'prompts.main.choice.rescaffold': 'Re-scaffold (overwrite)',
  'prompts.main.unfilledPrompt': '{count} files need to be filled. What would you like to do?',
  'prompts.setup.confirmContinue': 'This will create and fill documentation. Continue?',
  'spinner.setup.creatingStructure': 'Creating documentation structure...',
  'spinner.setup.fillingDocs': 'Filling documentation with AI...',
  'info.setup.incomplete.title': 'Setup incomplete',
  'info.setup.incomplete.detail': 'Run `npx @ai-coders/context fill .` to fill documentation later.',
  'success.setup.docsCreated': 'Documentation created!',
  'info.setup.reviewFiles': 'Review the files in .context/ and commit them.',
  'prompts.sync.source': 'Source agents directory',
  'prompts.sync.mode': 'How should references be created?',
  'prompts.sync.modeSymlink': 'Symlinks (recommended)',
  'prompts.sync.modeMarkdown': 'Markdown reference files',
  'prompts.sync.targetType': 'Where to sync agents?',
  'prompts.sync.targetPreset': 'Use a preset (Claude, GitHub, etc.)',
  'prompts.sync.targetCustom': 'Custom path',
  'prompts.sync.selectPreset': 'Select target preset',
  'prompts.sync.preset.claude': 'Claude Code (.claude/agents)',
  'prompts.sync.preset.github': 'GitHub Copilot (.github/agents)',
  'prompts.sync.preset.cursor': 'Cursor (.cursor/agents)',
  'prompts.sync.preset.all': 'All presets',
  'prompts.sync.customPath': 'Enter custom target path',
  'prompts.sync.dryRun': 'Preview changes first (dry-run)?',
  'prompts.sync.force': 'Overwrite existing files?',
  'errors.sync.failed': 'Failed to sync agents',
  'errors.sync.noTargetsSpecified': 'No targets specified. Use --target or --preset.',
  'errors.sync.sourceMissing': 'Source directory does not exist: {path}',
  'errors.sync.sourceNotDirectory': 'Source path is not a directory: {path}',
  'warnings.sync.noAgentsFound': 'No agent files found in source directory.',
  'spinner.sync.processing': 'Syncing to {path}...',
  'spinner.sync.complete': 'Synced {count} files to {path}',
  'spinner.sync.failed': 'Failed to sync to {path}',
  'success.sync.completed': 'Agent sync complete. Your AI tools are now configured.',
  'steps.sync.processingTarget': 'Processing target: {path}',
  'steps.sync.summary': 'Generating sync summary',
  'info.sync.foundAgents': 'Agent files discovered',
  'info.sync.foundAgentsDetail': 'Found {count} agent playbooks to sync',
  // Import commands translations
  'commands.importRules.description': 'Import cursor rules and AI assistant rules to .context/docs',
  'commands.importRules.options.source': 'Source paths to scan for rules',
  'commands.importRules.options.target': 'Target directory for imported rules',
  'commands.importRules.options.format': 'Output format: markdown, formatted, or raw',
  'commands.importRules.options.force': 'Overwrite existing files',
  'commands.importRules.options.dryRun': 'Preview changes without writing',
  'commands.importRules.options.verbose': 'Enable verbose logging',
  'commands.importRules.options.autoDetect': 'Auto-detect rules in common locations',
  'commands.importAgents.description': 'Import agents from AI tool directories to .context/agents',
  'commands.importAgents.options.source': 'Source paths to scan for agents',
  'commands.importAgents.options.target': 'Target directory for imported agents',
  'commands.importAgents.options.force': 'Overwrite existing files',
  'commands.importAgents.options.dryRun': 'Preview changes without writing',
  'commands.importAgents.options.verbose': 'Enable verbose logging',
  'commands.importAgents.options.autoDetect': 'Auto-detect agents in common locations',
  'warnings.import.noRulesFound': 'No rules files found.',
  'warnings.import.noAgentsFound': 'No agent files found.',
  'spinner.import.detectingRules': 'Detecting rules files...',
  'spinner.import.detectingAgents': 'Detecting agent files...',
  'spinner.import.scanningPaths': 'Scanning source paths...',
  'spinner.import.importing': 'Importing to {path}...',
  'spinner.import.complete': 'Imported {count} files to {path}',
  'info.import.foundRules': 'Rules files discovered',
  'info.import.foundRulesDetail': 'Found {count} rules files to import',
  'info.import.foundAgents': 'Agent files discovered',
  'info.import.foundAgentsDetail': 'Found {count} agent files to import',
  'success.import.completed': 'Import completed successfully.',
  'errors.import.failed': 'Failed to import files',
  'prompts.mode.select': 'How would you like to configure this operation?',
  'prompts.mode.quick': 'Quick Start (use smart defaults)',
  'prompts.mode.advanced': 'Advanced (customize all options)',
  'prompts.summary.title': 'Configuration Summary',
  'prompts.summary.proceed': 'Proceed with this configuration?',
  'prompts.llm.autoDetected': 'Auto-detected from environment',
  'prompts.quick.confirmRepo': 'Use this repository?',
  'prompts.sync.quickTarget': 'Where should agents be synced?',
  'prompts.sync.quickTarget.common': 'Claude Code + GitHub Copilot (recommended)',
  'prompts.sync.quickTarget.claude': 'Claude Code only',
  'prompts.sync.quickTarget.all': 'All AI tools',
  'prompts.sync.quickTarget.custom': 'Custom path...',
  // PREVC Workflow translations
  'prompts.main.choice.workflow': 'üîÑ PREVC Workflow',
  'prompts.workflow.noWorkflowFound': 'No PREVC workflow found. Create a new one?',
  'prompts.workflow.projectName': 'Project/feature name:',
  'prompts.workflow.projectNameRequired': 'Name is required',
  'prompts.workflow.description': 'Brief description (for scale detection):',
  'prompts.workflow.scale': 'Project scale:',
  'prompts.workflow.scale.auto': 'Auto-detect (based on description)',
  'prompts.workflow.scale.quick': 'Quick - Bug fixes, tweaks (~5 min)',
  'prompts.workflow.scale.small': 'Small - Simple features (~15 min)',
  'prompts.workflow.scale.medium': 'Medium - Regular features (~30 min)',
  'prompts.workflow.scale.large': 'Large - Full products (~1 hour)',
  'prompts.workflow.scale.enterprise': 'Enterprise - Systems with compliance',
  'prompts.workflow.action': 'Workflow action:',
  'prompts.workflow.action.advance': '‚è≠Ô∏è  Advance to next phase',
  'prompts.workflow.action.refresh': 'üìä Refresh status',
  'prompts.workflow.action.back': '‚Üê Back to main menu',
  'success.workflow.initialized': 'Workflow PREVC initialized: {name}',
  'success.workflow.advanced': 'Advanced to phase: {phase} - {phaseName}',
  'success.workflow.completed': 'Workflow completed!',
  'errors.workflow.initFailed': 'Failed to initialize workflow',
  'errors.workflow.advanceFailed': 'Failed to advance workflow',
  'errors.workflow.notFound': 'No workflow found. Run "workflow init <name>" first.',
  'info.workflow.scale': 'Scale',
  'info.workflow.currentPhase': 'Current Phase',
  'prompts.workflow.workflowComplete': 'Current workflow is complete. What would you like to do?',
  'prompts.workflow.action.newWorkflow': 'üÜï Start a new workflow',
  'prompts.workflow.action.viewStatus': 'üìä View completed workflow status',
  'prompts.workflow.confirmNewWorkflow': 'This will replace the current workflow. Continue?'
} as const;

export type TranslationKey = keyof typeof englishMessages;

type TranslationDictionary = Record<TranslationKey, string>;

const portugueseMessages: TranslationDictionary = {
  'cli.name': 'AI Coders Context by aicoders.academy',
  'cli.tagline': 'Gere documenta√ß√£o e playbooks de agentes com ou sem assist√™ncia de IA',
  'cli.description': 'Crie bases de documenta√ß√£o e playbooks de agentes para o seu reposit√≥rio',
  'global.options.lang': 'Idioma para a sa√≠da do CLI (en ou pt-BR)',
  'ui.version': 'Vers√£o {version}',
  'ui.projectConfiguration.title': 'Configura√ß√£o do Projeto',
  'ui.projectConfiguration.repository': 'Reposit√≥rio',
  'ui.projectConfiguration.output': 'Sa√≠da',
  'ui.projectConfiguration.mode': 'Modo',
  'ui.progress.starting': 'Iniciando...',
  'ui.analysis.complete.title': 'An√°lise Conclu√≠da',
  'ui.analysis.files': 'Arquivos',
  'ui.analysis.directories': 'Diret√≥rios',
  'ui.analysis.totalSize': 'Tamanho total',
  'ui.fileTypeDistribution.title': 'Distribui√ß√£o de Tipos',
  'ui.generationSummary.title': 'Scaffold Conclu√≠do',
  'ui.generationSummary.documentation': 'Documenta√ß√£o',
  'ui.generationSummary.agents': 'Agentes',
  'ui.generationSummary.timeElapsed': 'Tempo',
  'ui.generationSummary.nextStep': 'Pr√≥ximo passo: personalize os templates gerados para o seu projeto.',
  'ui.error.title': 'Erro',
  'info.prompt.title': 'Prompt do sistema',
  'info.prompt.usingCustom': 'Usando prompt em {path}.',
  'info.prompt.usingPackage': 'Usando prompt empacotado em {path}.',
  'info.prompt.usingBundled': 'Usando prompt padr√£o inclu√≠do no ai-context.',
  'info.update.available.title': 'Atualiza√ß√£o dispon√≠vel',
  'info.update.available.detail': 'Uma nova vers√£o {latest} est√° dispon√≠vel (atual {current}). Atualize com {command}.',
  'commands.init.description': 'Gerar bases de documenta√ß√£o e agentes para um reposit√≥rio',
  'commands.init.arguments.repoPath': 'Caminho do reposit√≥rio a ser analisado',
  'commands.init.arguments.type': 'Tipo de base: "docs", "agents" ou "both" (padr√£o)',
  'commands.init.options.output': 'Diret√≥rio de sa√≠da para os artefatos gerados',
  'commands.init.options.exclude': 'Padr√µes glob para excluir da an√°lise',
  'commands.init.options.include': 'Padr√µes glob para incluir durante a an√°lise',
  'commands.init.options.verbose': 'Ativa logs detalhados',
  'commands.init.options.noSemantic': 'Desativa an√°lise sem√¢ntica de c√≥digo (ativada por padr√£o)',
  'commands.fill.description': 'Usar um assistente de IA para preencher docs e agents com o contexto mais recente do reposit√≥rio',
  'commands.fill.arguments.repoPath': 'Caminho da raiz do reposit√≥rio usado para montar o contexto',
  'commands.fill.options.output': 'Diret√≥rio com docs/ e agents/ gerados pela base',
  'commands.fill.options.apiKey': 'Chave de API para o provedor de LLM',
  'commands.fill.options.model': 'Modelo de LLM a ser utilizado',
  'commands.fill.options.provider': 'Provedor de LLM (openrouter, openai, anthropic, google)',
  'commands.fill.options.baseUrl': 'URL base personalizada para as APIs do provedor',
  'commands.fill.options.prompt': 'Caminho para o prompt de instru√ß√£o',
  'commands.fill.options.limit': 'N√∫mero m√°ximo de arquivos a processar',
  'commands.fill.options.exclude': 'Padr√µes glob para excluir da an√°lise do reposit√≥rio',
  'commands.fill.options.include': 'Padr√µes glob para incluir durante a an√°lise',
  'commands.fill.options.verbose': 'Ativa logs detalhados',
  'commands.fill.options.noSemantic': 'Desativa modo de contexto sem√¢ntico e usa explora√ß√£o baseada em ferramentas',
  'commands.fill.options.languages': 'Linguagens de programa√ß√£o a analisar (ex: typescript,python)',
  'commands.fill.options.useLsp': 'Habilita LSP para an√°lise sem√¢ntica mais profunda (tipos, refer√™ncias)',
  'prompts.fill.semantic': 'Usar modo de contexto sem√¢ntico? (mais r√°pido, menos tokens - recomendado)',
  'prompts.fill.languages': 'Selecione as linguagens de programa√ß√£o para an√°lise',
  'prompts.fill.useLsp': 'Usar LSP para an√°lise de tipos mais profunda? (mais lento mas mais preciso)',
  'commands.plan.description': 'Criar um plano de desenvolvimento que conecta docs e playbooks de agentes',
  'commands.plan.arguments.planName': 'Nome do plano (usado como slug do arquivo)',
  'commands.plan.options.output': 'Diret√≥rio com docs/ e agents/ gerados pela base',
  'commands.plan.options.title': 'T√≠tulo personalizado para o plano',
  'commands.plan.options.summary': 'Resumo inicial para o cabe√ßalho do plano',
  'commands.plan.options.force': 'Sobrescreve o plano se ele j√° existir (modo base)',
  'commands.plan.options.fill': 'Usa um assistente de IA para preencher ou atualizar o plano em vez de apenas gerar',
  'commands.plan.options.repo': 'Raiz do reposit√≥rio para sumariza√ß√£o adicional',
  'commands.plan.options.apiKey': 'Chave de API para o provedor de LLM',
  'commands.plan.options.model': 'Modelo de LLM a ser utilizado',
  'commands.plan.options.provider': 'Provedor de LLM (openrouter, openai, anthropic, google)',
  'commands.plan.options.baseUrl': 'URL base personalizada para as APIs do provedor',
  'commands.plan.options.prompt': 'Caminho para o prompt de atualiza√ß√£o do plano',
  'commands.plan.options.dryRun': 'Pr√©-visualiza as atualiza√ß√µes sem escrever arquivos',
  'commands.plan.options.include': 'Padr√µes glob para incluir na an√°lise do reposit√≥rio',
  'commands.plan.options.exclude': 'Padr√µes glob para excluir da an√°lise do reposit√≥rio',
  'commands.plan.options.verbose': 'Ativa logs detalhados',
  'commands.plan.options.noSemantic': 'Desativa an√°lise sem√¢ntica de c√≥digo (ativada por padr√£o)',
  'commands.plan.options.noLsp': 'Desativa an√°lise sem√¢ntica LSP (ativada por padr√£o para planos)',
  'errors.init.scaffoldFailed': 'Falha ao gerar os artefatos base',
  'errors.fill.failed': 'Falha ao preencher documenta√ß√£o e agentes com ajuda de um assistente de IA',
  'errors.plan.creationFailed': 'Falha ao criar o template do plano',
  'errors.init.invalidType': 'Tipo de base "{value}" inv√°lido. Use um dos seguintes: {allowed}',
  'errors.common.repoMissing': 'O caminho do reposit√≥rio n√£o existe: {path}',
  'warnings.scaffold.noneSelected': 'Nenhuma documenta√ß√£o ou playbook selecionado. Nada a gerar.',
  'steps.init.analyze': 'Analisando a estrutura do reposit√≥rio',
  'steps.init.docs': 'Gerando bases de documenta√ß√£o',
  'steps.init.agents': 'Gerando playbooks de agentes',
  'spinner.repo.scanning': 'Escaneando o reposit√≥rio...',
  'spinner.repo.scanComplete': 'Encontrados {fileCount} arquivos em {directoryCount} diret√≥rios',
  'spinner.docs.creating': 'Criando diret√≥rio e templates de docs...',
  'spinner.docs.creatingWithSemantic': 'Analisando codebase e criando templates de docs...',
  'spinner.docs.created': 'Scaffold de documenta√ß√£o criado ({count} arquivos)',
  'spinner.agents.creating': 'Criando diret√≥rio e templates de agentes...',
  'spinner.agents.creatingWithSemantic': 'Analisando codebase e criando playbooks de agentes...',
  'spinner.agents.created': 'Scaffold de agentes criado ({count} arquivos)',
  'spinner.plan.creating': 'Criando template de plano...',
  'spinner.plan.created': 'Template de plano criado',
  'spinner.plan.creationFailed': 'Falha ao criar o template do plano',
  'success.scaffold.ready': 'Base dispon√≠vel em {path}',
  'success.plan.createdAt': 'Plano criado em {path}',
  'errors.fill.missingDocsScaffold': 'Scaffold de documenta√ß√£o n√£o encontrado. Execute `ai-context init` primeiro.',
  'errors.fill.missingAgentsScaffold': 'Scaffold de agentes n√£o encontrado. Execute `ai-context init` primeiro.',
  'errors.fill.missingScaffold': 'Nenhum scaffold encontrado. Execute `ai-context init` primeiro para criar docs e/ou agents.',
  'steps.fill.analyze': 'Analisando a estrutura do reposit√≥rio',
  'warnings.fill.noTargets': 'Nenhum arquivo Markdown foi encontrado em .context/docs ou .context/agents. Execute "ai-context init" antes de preencher.',
  'steps.fill.processFiles': 'Atualizando {count} arquivos com {model}',
  'spinner.fill.processing': 'Processando {path}...',
  'spinner.fill.noContent': 'Nenhum conte√∫do recebido para {path}',
  'messages.fill.emptyResponse': 'Resposta vazia do assistente de IA',
  'messages.fill.previewStart': '--- In√≠cio da pr√©via ---',
  'messages.fill.previewEnd': '--- Fim da pr√©via ---',
  'spinner.fill.updated': 'Atualizado {path}',
  'spinner.fill.failed': 'Falha em {path}',
  'steps.fill.summary': 'Resumindo o uso do assistente de IA',
  'success.fill.completed': 'Preenchimento com assistente de IA conclu√≠do. Revise as mudan√ßas e fa√ßa o commit quando estiver pronto.',
  'errors.plan.invalidName': 'O nome do plano deve conter ao menos um caractere alfanum√©rico.',
  'messages.plan.regenerated': 'Regerado {path} antes do preenchimento com assistente de IA.',
  'messages.plan.created': 'Criado {path} antes do preenchimento com assistente de IA.',
  'info.plan.scaffolded.title': 'Plano criado',
  'errors.plan.missingPlansDir': 'Diret√≥rio de planos n√£o encontrado. Execute `ai-context plan <nome>` para criar um.',
  'errors.plan.notFound': 'Plano n√£o encontrado. Esperado {expected}.',
  'steps.plan.summary': 'Resumindo estado do reposit√≥rio',
  'spinner.planFill.analyzingRepo': 'Analisando reposit√≥rio...',
  'spinner.planFill.summaryReady': 'Resumo do reposit√≥rio pronto',
  'steps.plan.update': 'Atualizando {path} com {model}',
  'spinner.planFill.updating': 'Preenchendo {path}...',
  'spinner.planFill.noContent': 'Nenhum conte√∫do recebido do assistente de IA',
  'spinner.planFill.dryRun': 'Execu√ß√£o simulada - pr√©via a seguir',
  'spinner.planFill.updated': 'Atualizado {path}',
  'spinner.planFill.failed': 'Falha ao preencher o plano',
  'steps.plan.summaryResults': 'Resumindo o uso do assistente de IA',
  'success.plan.filled': 'Preenchimento do plano conclu√≠do. Revise as atualiza√ß√µes e fa√ßa o commit quando estiver pronto.',
  'errors.commands.analyzeRemoved': 'O comando analyze foi removido na vers√£o focada em bases do ai-context.',
  'errors.commands.updateRemoved': 'O comando update n√£o √© mais suportado. Execute `ai-context init` novamente para atualizar as bases.',
  'errors.commands.previewRemoved': 'O modo de pr√©-visualiza√ß√£o foi descontinuado. Use diretamente os docs e playbooks gerados.',
  'errors.commands.guidelinesRemoved': 'A gera√ß√£o de guidelines dependia de LLMs e n√£o est√° mais dispon√≠vel.',
  'errors.cli.executionFailed': 'Falha na execu√ß√£o do CLI',
  'errors.init.overwriteDeclined': 'Scaffold cancelado para evitar sobrescrever conte√∫do existente.',
  'prompts.main.action': 'O que voc√™ gostaria de fazer?',
  'prompts.main.choice.scaffold': 'Gerar bases de documenta√ß√£o/agentes',
  'prompts.main.choice.fill': 'Preencher docs e agentes com um LLM',
  'prompts.main.choice.plan': 'Criar um plano de desenvolvimento',
  'prompts.main.choice.changeLanguage': 'Mudar idioma',
  'prompts.main.choice.exit': 'Sair do modo interativo',
  'prompts.scaffold.repoPath': 'Caminho do reposit√≥rio para analisar',
  'prompts.scaffold.type': 'O que devemos gerar?',
  'prompts.scaffold.typeBoth': 'Docs e playbooks',
  'prompts.scaffold.typeDocs': 'Somente docs',
  'prompts.scaffold.typeAgents': 'Somente playbooks',
  'prompts.init.confirmOverwriteDocs': 'A documenta√ß√£o j√° existe em {path}. Deseja sobrescrever os arquivos atuais?',
  'prompts.init.confirmOverwriteAgents': 'Os playbooks de agentes j√° existem em {path}. Deseja sobrescrever os arquivos atuais?',
  'prompts.common.verbose': 'Ativar logs detalhados?',
  'prompts.fill.repoPath': 'Caminho do reposit√≥rio que cont√©m a base',
  'prompts.fill.promptPath': 'Caminho do prompt personalizado (deixe em branco para usar o padr√£o incluso)',
  'prompts.fill.limit': 'N√∫mero m√°ximo de arquivos a atualizar (deixe em branco para todos)',
  'prompts.fill.overrideModel': 'Sobrescrever configura√ß√£o de provedor/modelo?',
  'prompts.fill.provider': 'Selecione o provedor de LLM',
  'prompts.fill.provider.openrouter': 'OpenRouter (acesso a m√∫ltiplos modelos)',
  'prompts.fill.provider.openai': 'OpenAI (GPT-4, etc.)',
  'prompts.fill.provider.anthropic': 'Anthropic (Claude)',
  'prompts.fill.provider.google': 'Google (Gemini)',
  'prompts.fill.model': 'Identificador do modelo',
  'prompts.fill.provideApiKey': 'Informar uma chave de API para esta execu√ß√£o?',
  'prompts.fill.apiKey': 'Chave de API',
  'prompts.plan.name': 'Nome do plano (usado no slug do arquivo)',
  'prompts.plan.goal': 'O que deve ser planejado?',
  'prompts.plan.mode': 'Como voc√™ quer trabalhar com este plano?',
  'prompts.plan.modeScaffold': 'Gerar um template de plano',
  'prompts.plan.modeFill': 'Criar um plano com I.A. (cria um plano com o contexto atual)',
  'prompts.plan.summary': 'Resumo opcional para iniciar o plano (deixe em branco para adicionar depois)',
  'prompts.plan.repoPath': 'Raiz do reposit√≥rio para contexto',
  'prompts.plan.dryRun': 'Pr√©-visualizar atualiza√ß√µes sem escrever arquivos?',
  'prompts.plan.useLsp': 'Usar LSP para an√°lise de tipos mais profunda? (recomendado para planos)',
  'prompts.language.select': 'Escolha o idioma do CLI / Choose the CLI language',
  'prompts.language.option.en': 'Ingl√™s / English',
  'prompts.language.option.pt-BR': 'Portugu√™s (Brasil) / Portuguese (Brazil)',
  'errors.plan.fillFailed': 'Falha ao preencher o plano com ajuda de um assistente de IA',
  'errors.fill.promptMissing': 'Arquivo de prompt n√£o encontrado em {path}.',
  'errors.fill.apiKeyMissing': '√â necess√°ria uma chave de API {provider}. Defina uma das vari√°veis {envVars} ou use --api-key.',
  'info.interactive.returning.title': 'Menu principal',
  'info.interactive.returning.detail': 'Voltando ao menu interativo. Escolha outra a√ß√£o ou selecione Sair.',
  'success.interactive.goodbye': 'At√© logo! Obrigado por usar o ai-context.',
  'agent.starting': 'Iniciando',
  'agent.complete': 'Conclu√≠do',
  'agent.steps': 'passos',
  'agent.type.documentation': 'Agente de Documenta√ß√£o',
  'agent.type.playbook': 'Agente de Playbook',
  'agent.type.plan': 'Agente de Plano',
  'agent.type.fill': 'Agente de Preenchimento',
  'commands.sync.description': 'Sincronizar playbooks de agentes com diret√≥rios de ferramentas IA (.claude, .github, etc.)',
  'commands.sync.options.source': 'Diret√≥rio de origem dos agentes',
  'commands.sync.options.target': 'Diret√≥rios de destino para sincronizar',
  'commands.sync.options.mode': 'Tipo de refer√™ncia: symlink ou markdown',
  'commands.sync.options.preset': 'Preset padr√£o: claude, github, cursor ou all',
  'commands.sync.options.force': 'Sobrescrever arquivos/symlinks existentes',
  'commands.sync.options.dryRun': 'Pr√©-visualizar mudan√ßas sem escrever',
  'commands.sync.options.verbose': 'Ativa logs detalhados',
  'prompts.main.choice.syncAgents': 'Sincronizar agentes com ferramentas IA',
  'prompts.main.choice.create': 'Criar documenta√ß√£o para este projeto',
  'prompts.main.choice.moreOptions': 'Mais op√ß√µes...',
  'prompts.main.choice.updateDocs': 'Atualizar documenta√ß√£o',
  'prompts.main.choice.updateDocsBehind': 'Atualizar documenta√ß√£o ({daysBehind} dias atr√°s)',
  'prompts.main.choice.rescaffold': 'Refazer scaffold (sobrescrever)',
  'prompts.main.unfilledPrompt': '{count} arquivos precisam ser preenchidos. O que voc√™ gostaria de fazer?',
  'prompts.setup.confirmContinue': 'Isso criar√° e preencher√° a documenta√ß√£o. Continuar?',
  'spinner.setup.creatingStructure': 'Criando estrutura de documenta√ß√£o...',
  'spinner.setup.fillingDocs': 'Preenchendo documenta√ß√£o com IA...',
  'info.setup.incomplete.title': 'Configura√ß√£o incompleta',
  'info.setup.incomplete.detail': 'Execute `npx @ai-coders/context fill .` para preencher a documenta√ß√£o depois.',
  'success.setup.docsCreated': 'Documenta√ß√£o criada!',
  'info.setup.reviewFiles': 'Revise os arquivos em .context/ e fa√ßa commit.',
  'prompts.sync.source': 'Diret√≥rio de origem dos agentes',
  'prompts.sync.mode': 'Como as refer√™ncias devem ser criadas?',
  'prompts.sync.modeSymlink': 'Symlinks (recomendado)',
  'prompts.sync.modeMarkdown': 'Arquivos de refer√™ncia Markdown',
  'prompts.sync.targetType': 'Para onde sincronizar os agentes?',
  'prompts.sync.targetPreset': 'Usar um preset (Claude, GitHub, etc.)',
  'prompts.sync.targetCustom': 'Caminho personalizado',
  'prompts.sync.selectPreset': 'Selecione o preset de destino',
  'prompts.sync.preset.claude': 'Claude Code (.claude/agents)',
  'prompts.sync.preset.github': 'GitHub Copilot (.github/agents)',
  'prompts.sync.preset.cursor': 'Cursor (.cursor/agents)',
  'prompts.sync.preset.all': 'Todos os presets',
  'prompts.sync.customPath': 'Digite o caminho personalizado de destino',
  'prompts.sync.dryRun': 'Pr√©-visualizar mudan√ßas primeiro (dry-run)?',
  'prompts.sync.force': 'Sobrescrever arquivos existentes?',
  'errors.sync.failed': 'Falha ao sincronizar agentes',
  'errors.sync.noTargetsSpecified': 'Nenhum destino especificado. Use --target ou --preset.',
  'errors.sync.sourceMissing': 'Diret√≥rio de origem n√£o existe: {path}',
  'errors.sync.sourceNotDirectory': 'Caminho de origem n√£o √© um diret√≥rio: {path}',
  'warnings.sync.noAgentsFound': 'Nenhum arquivo de agente encontrado no diret√≥rio de origem.',
  'spinner.sync.processing': 'Sincronizando para {path}...',
  'spinner.sync.complete': 'Sincronizados {count} arquivos para {path}',
  'spinner.sync.failed': 'Falha ao sincronizar para {path}',
  'success.sync.completed': 'Sincroniza√ß√£o de agentes conclu√≠da. Suas ferramentas IA est√£o configuradas.',
  'steps.sync.processingTarget': 'Processando destino: {path}',
  'steps.sync.summary': 'Gerando resumo da sincroniza√ß√£o',
  'info.sync.foundAgents': 'Arquivos de agentes descobertos',
  'info.sync.foundAgentsDetail': 'Encontrados {count} playbooks de agentes para sincronizar',
  // Tradu√ß√µes dos comandos de importa√ß√£o
  'commands.importRules.description': 'Importar regras do Cursor e de assistentes IA para .context/docs',
  'commands.importRules.options.source': 'Caminhos de origem para procurar regras',
  'commands.importRules.options.target': 'Diret√≥rio de destino para regras importadas',
  'commands.importRules.options.format': 'Formato de sa√≠da: markdown, formatted ou raw',
  'commands.importRules.options.force': 'Sobrescrever arquivos existentes',
  'commands.importRules.options.dryRun': 'Pr√©-visualizar mudan√ßas sem escrever',
  'commands.importRules.options.verbose': 'Ativar logs detalhados',
  'commands.importRules.options.autoDetect': 'Auto-detectar regras em locais comuns',
  'commands.importAgents.description': 'Importar agentes de diret√≥rios de ferramentas IA para .context/agents',
  'commands.importAgents.options.source': 'Caminhos de origem para procurar agentes',
  'commands.importAgents.options.target': 'Diret√≥rio de destino para agentes importados',
  'commands.importAgents.options.force': 'Sobrescrever arquivos existentes',
  'commands.importAgents.options.dryRun': 'Pr√©-visualizar mudan√ßas sem escrever',
  'commands.importAgents.options.verbose': 'Ativar logs detalhados',
  'commands.importAgents.options.autoDetect': 'Auto-detectar agentes em locais comuns',
  'warnings.import.noRulesFound': 'Nenhum arquivo de regras encontrado.',
  'warnings.import.noAgentsFound': 'Nenhum arquivo de agente encontrado.',
  'spinner.import.detectingRules': 'Detectando arquivos de regras...',
  'spinner.import.detectingAgents': 'Detectando arquivos de agentes...',
  'spinner.import.scanningPaths': 'Escaneando caminhos de origem...',
  'spinner.import.importing': 'Importando para {path}...',
  'spinner.import.complete': 'Importados {count} arquivos para {path}',
  'info.import.foundRules': 'Arquivos de regras descobertos',
  'info.import.foundRulesDetail': 'Encontrados {count} arquivos de regras para importar',
  'info.import.foundAgents': 'Arquivos de agentes descobertos',
  'info.import.foundAgentsDetail': 'Encontrados {count} arquivos de agentes para importar',
  'success.import.completed': 'Importa√ß√£o conclu√≠da com sucesso.',
  'errors.import.failed': 'Falha ao importar arquivos',
  'prompts.mode.select': 'Como voc√™ quer configurar esta opera√ß√£o?',
  'prompts.mode.quick': 'In√≠cio R√°pido (usar configura√ß√µes autom√°ticas)',
  'prompts.mode.advanced': 'Avan√ßado (personalizar todas as op√ß√µes)',
  'prompts.summary.title': 'Resumo da Configura√ß√£o',
  'prompts.summary.proceed': 'Prosseguir com esta configura√ß√£o?',
  'prompts.llm.autoDetected': 'Detectado automaticamente do ambiente',
  'prompts.quick.confirmRepo': 'Usar este reposit√≥rio?',
  'prompts.sync.quickTarget': 'Para onde sincronizar os agentes?',
  'prompts.sync.quickTarget.common': 'Claude Code + GitHub Copilot (recomendado)',
  'prompts.sync.quickTarget.claude': 'Somente Claude Code',
  'prompts.sync.quickTarget.all': 'Todas as ferramentas IA',
  'prompts.sync.quickTarget.custom': 'Caminho personalizado...',
  // PREVC Workflow translations
  'prompts.main.choice.workflow': 'üîÑ Workflow PREVC',
  'prompts.workflow.noWorkflowFound': 'Nenhum workflow PREVC encontrado. Criar um novo?',
  'prompts.workflow.projectName': 'Nome do projeto/feature:',
  'prompts.workflow.projectNameRequired': 'Nome √© obrigat√≥rio',
  'prompts.workflow.description': 'Descri√ß√£o breve (para detec√ß√£o de escala):',
  'prompts.workflow.scale': 'Escala do projeto:',
  'prompts.workflow.scale.auto': 'Auto-detectar (baseado na descri√ß√£o)',
  'prompts.workflow.scale.quick': 'R√°pido - Bug fixes, ajustes (~5 min)',
  'prompts.workflow.scale.small': 'Pequeno - Features simples (~15 min)',
  'prompts.workflow.scale.medium': 'M√©dio - Features regulares (~30 min)',
  'prompts.workflow.scale.large': 'Grande - Produtos completos (~1 hora)',
  'prompts.workflow.scale.enterprise': 'Enterprise - Sistemas com compliance',
  'prompts.workflow.action': 'A√ß√£o do workflow:',
  'prompts.workflow.action.advance': '‚è≠Ô∏è  Avan√ßar para pr√≥xima fase',
  'prompts.workflow.action.refresh': 'üìä Atualizar status',
  'prompts.workflow.action.back': '‚Üê Voltar ao menu principal',
  'success.workflow.initialized': 'Workflow PREVC inicializado: {name}',
  'success.workflow.advanced': 'Avan√ßou para fase: {phase} - {phaseName}',
  'success.workflow.completed': 'Workflow conclu√≠do!',
  'errors.workflow.initFailed': 'Falha ao inicializar workflow',
  'errors.workflow.advanceFailed': 'Falha ao avan√ßar workflow',
  'errors.workflow.notFound': 'Nenhum workflow encontrado. Execute "workflow init <nome>" primeiro.',
  'info.workflow.scale': 'Escala',
  'info.workflow.currentPhase': 'Fase Atual',
  'prompts.workflow.workflowComplete': 'O workflow atual est√° conclu√≠do. O que voc√™ gostaria de fazer?',
  'prompts.workflow.action.newWorkflow': 'üÜï Iniciar um novo workflow',
  'prompts.workflow.action.viewStatus': 'üìä Ver status do workflow conclu√≠do',
  'prompts.workflow.confirmNewWorkflow': 'Isso substituir√° o workflow atual. Continuar?'
};

const dictionaries: Record<Locale, TranslationDictionary> = {
  en: englishMessages,
  'pt-BR': portugueseMessages
};

export type TranslateParams = Record<string, string | number | undefined>;

export type TranslateFn = (key: TranslationKey, params?: TranslateParams) => string;

export function createTranslator(locale: Locale): TranslateFn {
  const normalized = normalizeLocale(locale);
  return (key: TranslationKey, params?: TranslateParams) => {
    const dictionary = dictionaries[normalized] || dictionaries[DEFAULT_LOCALE];
    const fallback = dictionaries[DEFAULT_LOCALE];
    const template = dictionary[key] ?? fallback[key];
    return fillTemplate(template, params);
  };
}

export function normalizeLocale(locale: string): Locale {
  return SUPPORTED_LOCALES.find(candidate => candidate.toLowerCase() === locale.toLowerCase()) || DEFAULT_LOCALE;
}

export function detectLocale(argv: string[], envLocale?: string | null): Locale {
  const candidateFromArgs = extractLocaleFromArgs(argv);
  if (candidateFromArgs) {
    return normalizeLocale(candidateFromArgs);
  }
  if (envLocale) {
    return normalizeLocale(envLocale);
  }
  return DEFAULT_LOCALE;
}

function extractLocaleFromArgs(argv: string[]): string | undefined {
  for (let index = 0; index < argv.length; index += 1) {
    const segment = argv[index];
    if (segment === '--lang' || segment === '--language' || segment === '-l') {
      return argv[index + 1];
    }
    if (segment.startsWith('--lang=')) {
      return segment.split('=')[1];
    }
    if (segment.startsWith('--language=')) {
      return segment.split('=')[1];
    }
  }
  return undefined;
}

function fillTemplate(template: string, params?: TranslateParams): string {
  if (!params) {
    return template;
  }
  return template.replace(/\{(\w+)\}/g, (_match, key) => {
    const value = params[key];
    return value === undefined ? '' : String(value);
  });
}

export function isSupportedLocale(locale: string): boolean {
  return SUPPORTED_LOCALES.some(candidate => candidate.toLowerCase() === locale.toLowerCase());
}
